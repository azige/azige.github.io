<!DOCTYPE html>
<!-- Generated by GMarkdown -->
<html>
    <head>
        <title>Whitespace语言的解释器 - Azige的空间</title>
        <meta charset="UTF-8">
        <link rel="stylesheet" type="text/css" href="http://azige.miku.la/style.css">
    </head>
    <body>
        <p><img src="http://www.gravatar.com/avatar/8bb572f2672b78f8278ace12932cef9b?s=80" alt="avatar"/> <em>あなたの名前を呼んでいいかな？</em></p>
<div id="navBar">
    <a href="http://azige.miku.la">
        <div>首页</div>
    </a>
	<a href="http://azige.miku.la/profile.html">
		<div>个人资料</div>
	</a>
</div>
        <h1>Whitespace 语言的解释器</h1><p>最近似乎很热衷于写各种语法解析的程序，这回想起了一个很有趣的语言—— Whitespace ，于是使用 Java 写了一个 Whitespace 的解释器。</p><p>简单的介绍一下 Whitespace。<br/>Whitespace 是一种简单的编程语言，它的源代码里的有效字符只有空格[Space]、制表符[Tab]和换行符[LF]。这些空白字符在很多编程语言里都会被忽略，而 Whitespace 语言正好相反，这三个字符以外的字符都会被忽略，所以你可以在任何地方写注释。<br/>然而， Whitespace 又是一种深奥的编程语言，最初它只是为了娱乐而被开发出来，但它的语言与虚拟机模型是具有图灵完备性的，也就是说，任何 C++ , Java 能够实现的程序， Whitespace 也能够实现。</p><p>以下是来自中文维基的带语法高亮和注释的 hello world 程序<br/><img src="./image/whitespace-helloworld.png" alt="hello world""/><br/>此程序运行的结果即是打印出"Hello, world!"</p><p>关于 Whitespace 的更详细的资料可以参考<a href="http://zh.wikipedia.org/wiki/Whitespace">中文维基</a>与其<a href="http://compsoc.dur.ac.uk/whitespace/">官方主页</a>。</p><p>建立 Whitespace 的<a href="https://github.com/azige/whitespace-interpreter/blob/master/src/main/java/io/github/azige/whitespace/vm/WhitespaceVM.java">虚拟机模型</a>并不困难，因为其结构还是相当简单的，对于指令的实现也同样很简单，但是，让本人困扰的是指令序列，也就是程序。 Whitespace 中存在标签以及"goto"指令，如果只是单纯的一条一条指令的执行，碰到向后的"goto"指令的时候就会很麻烦。于是本人将执行方式设计为将完整的指令序列全部读取并解析后，添加到一个<a href="https://github.com/azige/whitespace-interpreter/blob/master/src/main/java/io/github/azige/whitespace/command/CommandListExecutor.java">指令序列执行器</a>对象中，再逐条执行，这样这个对象能够了解整个指令序列的上下文，并且能够很好的进行流程控制的工作。</p><p>为了建立这样一个指令序列执行器，不得不把指令也抽象成对象。幸好 Whitespace 的指令只有至多一个参数，因此指令对象也不需要设计得很复杂。但是如何把指令对象与指令的调用联系起来呢？对指令的类型使用 switch-case 肯定不合适，那么只能使用抽象方法来将指令的调用进行动态绑定了。最后为了避免类的数量过于膨胀，使用了<a href="https://github.com/azige/whitespace-interpreter/blob/master/src/main/java/io/github/azige/whitespace/command/DefaultCommandFactory.java">工厂模式与内部类</a>的方式来组织这一堆的指令类。</p><p><a href="https://github.com/azige/whitespace-interpreter/blob/master/src/main/java/io/github/azige/whitespace/WhitespaceParser.java">语法解析器</a>沿用了之前的 JSON 处理库中的语法解析器的风格，不过这究竟是不是一个好的风格可能还得再实践几次并继续改进。</p><p>完整的代码以及发行包可以从仓库获得<br/><a href="https://github.com/azige/whitespace-interpreter">https://github.com/azige/whitespace-interpreter</a></p>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'azige'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        console.log(dsq);
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><p><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></p>
<hr/>
<div style="text-align: center;">
<p>&copy; 2014 Azige </p>
<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br />本站文字，除去已附加许可证的代码以外，均采用<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a>进行许可。
</div>
    </body>
</html>
